# Maintainer: Ain <ain@waifu.club>
pkgname=holo-build
pkgver=1.5.1
pkgrel=0
pkgdesc="Cross-distribution system package compiler"
url="http://holocm.org/"
arch="all"
license="GPL 3.0"
depends="xz"
makedepends="go perl"
source="${pkgname}-${pkgver}.tar.gz::https://github.com/holocm/holo-build/archive/v${pkgver}.tar.gz"
subpackages="
	$pkgname-bash-completion:bashcomp:noarch
	$pkgname-zsh-completion:zshcomp:noarch
	$pkgname-doc
	"

build() {
	make
}

package() {
	cd "$srcdir"/"${pkgname}-${pkgver}"
	make DESTDIR="$pkgdir" install
}

bashcomp() {
        pkgdesc="Bash completion for $pkgname"
        depends=""

	mkdir -p "$subpkgdir"/usr/share/bash-completion/completions
	mv "$pkgdir"/usr/share/bash-completion/completions/holo-build "$subpkgdir"/usr/share/bash-completion/completions/holo-build
}

zshcomp() {
        pkgdesc="Zsh completion for $pkgname"
        depends=""

	mkdir -p "$subpkgdir"/usr/share/zsh/site-functions
	mv "$pkgdir"/usr/share/zsh/site-functions/_holo-build "$subpkgdir"/usr/share/zsh/site-functions/_holo-build
}

sha512sums="176a007ca8792b98cee8609e9d4d59724fa9452cc765bff8e7c8619aa0205fc9f821cb466bc9fe27d7cafda59b00d62181ffe0975594d91013ccb8deaa53f7e4  holo-build-1.5.1.tar.gz"
