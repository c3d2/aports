# Maintainer: Ain <ain@waifu.club>
pkgname=holo
pkgver=2.1
pkgrel=0
pkgdesc="Minimalistic configuration management"
url="http://holocm.org/"
arch="all"
license="GPL 3.0"
depends="git openssh shadow"
makedepends="go perl"
source="${pkgname}-${pkgver}.tar.gz::https://github.com/holocm/holo/archive/v${pkgver}.tar.gz"
subpackages="
	$pkgname-bash-completion:bashcomp:noarch
	$pkgname-zsh-completion:zshcomp:noarch
	$pkgname-doc
	"

build() {
	make
}

package() {
	cd "$srcdir"/"${pkgname}-${pkgver}"
	make DESTDIR="$pkgdir" install
}

bashcomp() {
        pkgdesc="Bash completion for $pkgname"
        depends=""

	mkdir -p "$subpkgdir"/usr/share/bash-completion/completions
	mv "$pkgdir"/usr/share/bash-completion/completions/holo "$subpkgdir"/usr/share/bash-completion/completions/holo
}

zshcomp() {
        pkgdesc="Zsh completion for $pkgname"
        depends=""

	mkdir -p "$subpkgdir"/usr/share/zsh/site-functions
	mv "$pkgdir"/usr/share/zsh/site-functions/_holo "$subpkgdir"/usr/share/zsh/site-functions/_holo
}

sha512sums="252cb105cee2cf080833dff08c078d7730ff1fa007051770bef9ebe94b4f018672de0d80fe5f8c30f70c531af61d0c3182725f0bda95e982bb761fe3cd0f55e7  holo-2.1.tar.gz"
